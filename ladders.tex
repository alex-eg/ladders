\documentclass[12pt,a4paper]{article}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{float}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\begin{document}

\newcommand{\pic}[2] {
  %\begin{figure}[h]
  \includegraphics[scale=#1]{#2}}
%\end{figure}

\section{Название:} Лестницы.
\section{Геймплей:} Нединамичный платформер.

Цель игры --- не погибнув, как можно быстрее дойти до последнего уровня и выбраться наружу, набрав как можно больше очков. Очки начисляются за собранные монетки и дополнительные жизни, время, оставшееся от таймера, стартующего в начале прохождения уровня.

Каждый уровень представляет собой несколько комнат, каждая комната занимает целиком окно игры. Комнаты соединены переходами, в каждой из них --- от одного до трёх этажей. Могут также быть вертикальные перегородки, двери. Этажи могут быть соединены лестницами.

Персонаж может погибнуть, либо упав с большой высоты, либо наступив на шипы. Изначально даётся две запасных жизни. В процессе прохождения можно собирать дополнительные.

Также можно собирать монетки, за что начисляются дополнительные очки.

В игре три уровня:
\begin{enumerate}
\item Пещера,
\item Подземелье
\item Поверхность
\end{enumerate}
В каждом уровне шесть комнат. Отличаются только оформлением.

Потерять жизнь можно, упав с большой высоты или наступив на шипы.

\section{Интерфейс:}
\subsection{Главное меню}

\noindent \pic{0.27}{mainmenu}
Символы ``>'' и ``<'' вокруг пункта означают, что он сейчас выбран, и по нажатии на энтер (или А) будет выполнено соответствующее действие.

\begin{itemize}
\item Продолжить --- присутствует, если в прошлом запуске была незаконченная сессия. Иначе отсутствует
\item Старт --- начало игры
\item Рекорды --- таблица рекордов с очками и именами победителей
\item Упрaвление --- меню настроек управления
\item Выход -- выход из приложения
\end{itemize}
\subsection{Игра}
\noindent \pic{0.27}{interface}

Основное окно --- текущий уровень. В левом верхнем углу таймер и счётчик жизней. В правом верхнем углу количество очков и полупрозрачный оверлей с картой.

Персонаж, монетка и сердечко (симоволизирующее дополнительную жизнь), появятся позже.
\section{Игровая механика:}
\subsection{Уровни}
Уровень представляет собой несколько (от 6 до 36) комнат, причём из любой комнаты есть путь в любую другую комнату, то есть уровень представляет собой \href{http://ru.wikipedia.org/wiki/%D0%9E%D1%80%D0%B8%D0%B5%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B9_%D0%B3%D1%80%D0%B0%D1%84#.D0.A1.D0.B2.D1.8F.D0.B7.D0.BD.D0.BE.D1.81.D1.82.D1.8C
}{\textit{сильно связный орграф}}.

Переход из комнаты в комнату возможнен тремя способами:
\begin{itemize}
\item Выйти через дверь в левой или правой стене комнаты
\item Пролезть по лестнице сквозь пол или потолок
\item Провалиться сквозь отсутствующий пол первого этажа комнаты
\end{itemize}

\subsection{Комнаты}
Каждая комната состоит из девяти равных \textit{областей} (разделена по вертикали и горизонтали на три части). Три соседние области, расположенные по горизонтали, образуют \textit{этаж}. В каждой комнате три этажа, каждый из которых, впрочем, может отсутствовать.
Таким образом, в каждой комнате есть по 12 вертикальных и горизонтальных \textit{сегментов стен}, каждый из которых может присутствовать или отсутствовать. Также, в них могут располагаться двери и лестницы.\\
\pic{0.27}{room.png}
Если отсутствует внешний сегмент, это значит, что у комнаты со стороны отсутствующего сегмента также отсутствует соответствующий сегмент --- чтобы получится изотропный проход или пролёт. Со стороны, с которой к комнате не примыкает соседняя комната, внешние сегменты отсутствовать не могут.
Область считается присутствующей, если сегмент пола присутствует.
Внтури комнаты, из области в область можно попасть:
\begin{itemize}
\item перейдя на соответствующий сегмент
\item пройдя сквозь дверь или отсутствующую вертикальную перегородку
\item спустившись или поднявшись по лестнице
\item \textit{спрыгнув} на находящийся ниже этаж, только на один. То есть можно спрыгнуть:
  \begin{itemize}
  \item с 3-го этажа на 2-й
  \item со 2-го этажа на 1-й
  \item с 1-го на 3-й находящейся внизу комнаты
  \end{itemize}
\end{itemize}

Комнату также можно рассматривать как граф. Области являются вершинами, а двери, лестницы и спрыги --- рёбрами. Граф всех областей всех комнат также должен быть сильно связным.
\pic{0.27}{room-example-1}
\noindent \pic{0.27}{room-example-2}
\noindent \pic{0.27}{room-example-3}
\noindent \pic{0.27}{room-example-4}

Конфигурация комнат такова, чтобы выполнялось требование о сильной связности графа уровня. Из этого следует, в частности, что комнаты могут быть разеделены на части, недостижимые одна из другой, но в таком случае путь будет лежать через другие комнаты.
\subsection{Движения персонажа}
\subsubsection{Граф переходов состояний}
TODO
\subsubsection{Прыжок}
Предназначен для перепрыгивания шипов и отсутствующих сегментов, а также для спрыгивания.

Высота подпрыгивания --- не больше вертикального сегмента, то есть запрыгнуть с нижнего этажа на верхний нельзя, --- только забраться по лестнице.

Длина прыжка --- более горзионтального сегмента, чтобы можно было перепрыгнуть отсутствующий горизонтальный сегмент.

\subsection{Жизни}
Потерять жизнь можно, упав с большой высоты или наступив на шипы. Большая высота -- более двух сегментов. То есть при падении с третьего этажа до первого или ниже. Считается только вертикальный перепад высоты, поэтому если подпрыгнуть максимально высоко (и далеко) и приземлиться на этаж, находящийся сразу под тем, с которого был совершён прыжок, жизнь не потратится.

После утраты жизни на 3 секунды включается неуязвимость, позволяющая уйти с шипов. Если дополнительных жизней не остаётся, игра завершается.
\subsection{Завершение игры}
TODO
\section{Управление:}
С клавиатуры или геймпада.
Команды и дефолтные биндинги:
\begin{itemize}
\item Бег влево --- A --- Крестовина Влево
\item Бег вправо --- D --- Крестовина Вправо
\item Прыжок --- Space --- A
\item Меню --- Escape --- Start
\item Забраться на лестинцу --- W --- Крестовина Вверх
\item Открыть дверь --- E --- X
\item Упасть с лестницы --- S --- Крестовина Вниз
\item Показать карту --- M --- Y
\item Прокрутить камеру --- стрелки --- правый джойстик
\end{itemize}
При прокрутке камеры она возвращается в исходное положение после отпускания кнопки прокрутки.

При нажатии Esc во время игры --- игра ставится на паузу и возникает меню с предложениями продолжить или завершить текущую игру.
\section{Графика:}
OpenGL. Плоская. Пиксельная. Спрайтовая. Принцип работы спрайтовой анимации понятен из вот этой картинки:\\
\pic{1}{utsuho.png}
Анимация предусмотрена для дверей, монеток (вращение), и персонажа.

Размер уровня фиксирован --- 1440х900. Размер окна можно менять произвольным образом. Если весь уровень не влезает в окно, включается прокрутка камеры, центрованной на персонаже.

Минимальный размер окна --- 480х300. Меньше этого размера окно уменьшить нельзя. При изменении размеров окна соответственно меняется положение интерфейса.
\section{Физика:}
Обычная платформерная. Сквозь закрытые двери и стены ходить нельзя, сквозь перекрытия проваливаться и пропрыгивать нельзя. Управлять персонажем в воздухе (влево-вправо) возможно.
\section{Настройки:}
Хранятся в файле.
\section{Лучшие результаты:}
Хранятся в файле.
\section{Звук и музыка:}
Присутствуют. В идеале --- на каждом уровне своя музыка, каждое действие персонажа во время игры сопровождается звуками.

В меню озвучиваются переключения между пунктами и подтверждение выбора.
\end{document}
